(function(t){function e(e){for(var a,i,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},1837:function(t,e,n){},"18ffe":function(t,e,n){"use strict";var a=n("65a4"),r=n.n(a);r.a},"30b53":function(t,e,n){"use strict";var a=n("7357"),r=n.n(a);r.a},3889:function(t,e,n){},"45db":function(t,e,n){"use strict";var a=n("1837"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("4de4"),n("d81d"),n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("5319");var a=n("5530"),r=(n("96cf"),n("1da1")),s=n("53ca"),i=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("myheader")],1),n("el-main",[n("div",{staticClass:"center"},[n("router-view")],1)]),n("el-footer",[n("player",{attrs:{songId:t.songId}})],1)],1)},l=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:" space-between flex center"},[n("div",{staticClass:"flex align-center"},[n("el-menu",{staticClass:"el-menu-demo font no-border",staticStyle:{border:"none"},attrs:{mode:"horizontal"}},[n("el-menu-item",[n("router-link",{attrs:{to:"/index"}},[t._v("index")])],1),n("el-menu-item",[n("router-link",{attrs:{to:"/collections"}},[t._v("collections")])],1)],1),n("el-input",{staticStyle:{width:"35%","margin-right":"5px"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),n("span",{staticClass:"font search",on:{click:t.search}},[t._v(" "),n("i",{staticClass:"el-icon-search"}),t._v(" search ")])],1),n("el-menu",{staticClass:"el-menu-demo no-border",staticStyle:{border:"none"},attrs:{mode:"horizontal"}},[t.flagLogin?n("el-menu-item",{on:{click:t.logout}},[t._v("logout")]):n("el-menu-item",{on:{click:function(e){t.dialogVisible=!0}}},[t._v("login")]),n("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","modal-append-to-body":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",staticStyle:{"padding-right":"10%"},attrs:{model:t.form,rules:t.rules,"label-width":"30%"}},[n("el-form-item",{attrs:{label:"name",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"password",prop:"name"}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("el-form-item",{staticClass:"flex_end"},[n("el-button",{attrs:{type:"primary"},on:{click:t.cancle}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1),n("el-menu-item",{on:{click:function(e){return t.$router.push({name:"register"})}}},[t._v("register")])],1)],1)},u=[],d=(n("c975"),n("b0c0"),{data:function(){return{form:{name:"",password:""},rules:{name:[{min:1,max:12,message:"别空",trigger:"blur"}]},flagLogin:void 0,dialogVisible:!1,keyword:""}},methods:{cancle:function(){this.dialogVisible=!1,this.form.name="",this.form.password=""},logout:function(){-1!=["/collections","/message"].indexOf(this.curPath)&&this.$router.push({name:"index"}),this.$store.commit("setUid",""),this.flagLogin=!1},search:function(){var t=/select|update|delete|exec|count|’|"|=|;|>|<|%/i;if(t.test(this.keyword.toLowerCase())||t.test(this.keyword.toLowerCase()))return alert("请您不要输入特殊字符和SQL关键字！"),void(this.keyword="");this.$router.push({name:"search",params:{keyword:this.keyword,type:"1"}})},login:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=/select|update|delete|exec|count|’|"|=|;|>|<|%/i,!n.test(t.form.name.toLowerCase())&&!n.test(t.form.password.toLowerCase())){e.next=6;break}return alert("请您不要输入特殊字符和SQL关键字！"),t.form.name="",t.form.password="",e.abrupt("return");case 6:return e.next=8,t.$http.post("api/login",t.form);case 8:a=e.sent,t.form.password="","suc"==a.data.mes&&(t.$store.commit("setUid",a.data.result[0].id),alert("成功"),t.dialogVisible=!1,t.flagLogin=!0,t.form.name="");case 11:case"end":return e.stop()}}),e)})))()}},created:function(){this.$store.state.uid?this.flagLogin=!0:this.flagLogin=!1},computed:{curPath:function(){return this.$route.path}},name:"myheader"}),p=d,m=(n("9564"),n("2877")),f=Object(m["a"])(p,c,u,!1,null,"300246be",null),_=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center"},[n("div",{staticClass:"center-vertical flex"},[n("i",{staticClass:"el-icon-d-arrow-left",attrs:{id:"prev"},on:{click:function(e){t.curIndex<=0?t.curIndex=t.list.length-1:t.curIndex--}}}),n("i",{directives:[{name:"show",rawName:"v-show",value:t.paused,expression:"paused"}],staticClass:"el-icon-video-play",on:{click:t.play}}),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.paused,expression:"!paused"}],staticClass:"el-icon-video-pause",on:{click:t.pause}}),n("i",{staticClass:"el-icon-d-arrow-right",attrs:{id:"next"},on:{click:function(e){t.curIndex>=t.list.length-1?t.curIndex=0:t.curIndex++}}}),n("div",{staticClass:"roll"},[n("div",{staticClass:"artistMes"},[t.list.length?n("span",[t._v(t._s(t.list[t.curIndex].name))]):t._e(),t.list.length?n("span",[t._v("--"+t._s(t.list[t.curIndex].artists[0].name))]):t._e()]),n("el-slider",{attrs:{"show-tooltip":!1},on:{change:function(e){t.myVid.currentTime=t.percentage*t.myVid.duration/100}},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}})],1),n("span",{staticClass:"time"},[t._v("/")]),n("el-dropdown",{attrs:{placement:"top-end",trigger:"click"}},[n("i",{staticClass:"el-icon-tickets drop-icon",attrs:{id:"list"}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[0==t.list.length?n("el-dropdown-item",[t._v("no item")]):t._l(t.list,(function(e,a){return n("el-dropdown-item",{key:e.id},[n("div",{staticClass:"drop-list",on:{click:function(e){return t.change(a)}}},[n("el-row",{staticStyle:{width:"100%"}},[n("el-col",{attrs:{span:18}},[n("span",[t._v(t._s(e.name))])]),n("el-col",{attrs:{span:6}},[n("router-link",{attrs:{to:{name:"artist",params:{id:e.artists[0].id}}}},[t._v(" "+t._s(t._f("ellipsis")(e.artists[0].name)))])],1)],1),n("div",{staticClass:"delete-icon",on:{click:function(e){return e.stopPropagation(),t.pop(a)}}},[n("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"8px"}})])],1)])}))],2)],1),n("audio",{attrs:{id:"video1",src:t.list.length>0?t.list[t.curIndex].url:"",autoplay:""}})],1)])},b=[],g=(n("4160"),n("a434"),n("159b"),{data:function(){return{list:[],curIndex:0,time:0,percentage:0,myVid:"",paused:void 0,interval:"",loop:!0}},mounted:function(){var t=this;this.myVid=document.getElementById("video1"),this.myVid.onended=function(){1==t.list.length&&(t.percentage=0,t.myVid.play()),document.getElementById("next").click()},this.$bus.$on("play",function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n,a){var r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.list.length){e.next=5;break}return e.next=3,t.add_to_playlist(n,a);case 3:return t.clock(),e.abrupt("return");case 5:if(1!=t.list.length){e.next=14;break}if(t.list[0].id!=n.id){e.next=10;break}e.next=12;break;case 10:return e.next=12,t.add_to_playlist(n,a);case 12:return t.curIndex=t.list.length-1,e.abrupt("return");case 14:if(r=t.list.map((function(t){return t.id+""})),s=r.indexOf(n.id+""),-1==s){e.next=22;break}i=t.list[s],t.list.splice(s,1),t.list.push(i),e.next=24;break;case 22:return e.next=24,t.add_to_playlist(n,a);case 24:t.curIndex=t.list.length-1;case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.$bus.$on("add_to_playlist",this.add_to_playlist),this.$bus.$on("playAlbum",this.playAlbum)},beforeDestroy:function(){clearInterval(this.interval)},watch:{curIndex:function(){this.paused=!1,this.percentage=0,this.clock()}},methods:{pause:function(){this.paused=!0,this.myVid.pause(),clearInterval(this.interval)},show:function(){},playAlbum:function(t){var e=this;this.curIndex=0,t.forEach((function(t){e.add_to_playlist(t)}))},play:function(){this.paused=!1,this.myVid.play(),this.clock()},getUrl:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get("http://127.0.0.1:3000/song/url?id="+t);case 2:return a=n.sent,n.abrupt("return",a.data.data[0].url);case 4:case"end":return n.stop()}}),n)})))()},change:function(t){this.curIndex=t},add_to_playlist:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getUrl(t.id);case 2:if(a=e.sent,!a){e.next=10;break}return t.url=a,e.next=7,n.list.push(t);case 7:1==n.list.length&&n.clock(),e.next=11;break;case 10:n.loop&&(alert("vip歌曲放不了呀"),n.loop=!1,setTimeout((function(){n.loop=!0}),300));case 11:case"end":return e.stop()}}),e)})))()},clock:function(){var t=this;this.interval&&clearInterval(this.interval),this.list.length&&(this.interval=setInterval((function(){t.percentage+=.5/t.myVid.duration*100}),500))},pop:function(t){var e=document.getElementById("prev"),n=document.getElementById("list");this.list.splice(t,1),t<=this.curIndex&&(t==this.curIndex&&(this.percentage=0),e.click(),this.curIndex<0&&(this.curIndex=0)),n.click(),setTimeout((function(){n.click()}),200)}},name:"player"}),v=g,y=(n("e289"),Object(m["a"])(v,h,b,!1,null,"0e2e8b7a",null)),w=y.exports,x=n("2f62"),k={name:"app",data:function(){return{songId:""}},provide:function(){return{curSongId:this.songId}},computed:Object(x["b"])({uid:function(t){return t.uid}}),watch:{uid:function(){this.$store.dispatch("getCollections")}},mounted:function(){window.addEventListener("unload",this.saveState)},components:{myheader:_,player:w},methods:{saveState:function(){sessionStorage.setItem("state",JSON.stringify(this.$store.state))}}},C=k,O=(n("034f"),Object(m["a"])(C,o,l,!1,null,null,null)),I=O.exports,$=n("8c4f"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{required:""}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[n("template",{slot:"prepend"},[t._v("user")])],2)],1),n("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),n("el-form-item",{attrs:{required:""}},[n("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[n("template",{slot:"prepend"},[t._v("password")])],2)],1),n("el-form-item",{attrs:{required:""}},[n("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}},[n("template",{slot:"prepend"},[t._v("email")])],2)],1),n("el-form-item",{staticClass:"flex_end"},[n("el-button",{staticClass:"flex_end",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登录")])],1)],1)],1)},S=[],R={data:function(){return{form:{name:"",password:"",email:""}}},methods:{onSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("http://127.0.0.1:3300/api/insert",t.form);case 2:n=e.sent,200==n.status&&console.log("注册成功");case 4:case"end":return e.stop()}}),e)})))()}},name:"test"},j=R,P=(n("bf3e"),Object(m["a"])(j,E,S,!1,null,"24e1ec90",null)),M=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.imgList[t.curIndex],alt:""}})]),n("div",{staticStyle:{margin:"5px auto"}},t._l(t.imgList,(function(e,a){return n("el-button",{key:a,attrs:{type:t.curIndex==a?"primary":"info",circle:""},on:{click:function(e){return t.change(a,e)}}})})),1)])},D=[],L={name:"index",data:function(){return{imgList:[],curIndex:0}},methods:{change:function(t,e){this.curIndex=t}}},T=L,V=(n("45db"),Object(m["a"])(T,A,D,!1,null,null,null)),U=V.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:function(e){t.show}}},[t._v("11")])},K=[],W={data:function(){return{ww:void 0}},methods:{}},q=W,N=Object(m["a"])(q,B,K,!1,null,null,null),H=N.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-aside",{attrs:{width:"18%"}},[n("el-card",{staticClass:"box-card",staticStyle:{"border-bottom":"none"},attrs:{"body-style":"padding:0px",shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h4",{staticClass:"inline"},[t._v("Collections")]),n("i",{staticClass:"el-icon-delete",staticStyle:{float:"right",padding:"3px 5px"},on:{click:function(e){t.dialogVisible2=!0}}}),n("i",{staticClass:"el-icon-circle-plus",staticStyle:{float:"right",padding:"3px 5px"},on:{click:function(e){t.dialogVisible=!0}}})]),t._l(t.collections,(function(e,a){return t.collections.length?n("div",{key:a,class:["text",a==t.curCollection?"activate":""],on:{click:function(e){return t.chooseCollection(a)}}},[t._v(t._s(e.name))]):t._e()})),n("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-input",{attrs:{placeholder:"请输入歌单名"},model:{value:t.collectionName,callback:function(e){t.collectionName=e},expression:"collectionName"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.createCollection}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible2,width:"30%"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[n("el-radio-group",{model:{value:t.deleteId,callback:function(e){t.deleteId=e},expression:"deleteId"}},t._l(t.collections,(function(e,a){return n("el-radio",{key:a,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1,t.deleteId=void 0}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.deleteCollection}},[t._v("确 定")])],1)],1)],2)],1),n("el-main",[t.collections.length?n("list",{attrs:{songs:t.collections[t.curCollection].songs,columns:t.columns,type:"collections",parentFunction:t.deleteInList}}):t._e()],1)],1)},F=[],J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:function(e){return t.test(e)}}},[t.songs?n("el-table",{staticStyle:{overflow:"hidden"},attrs:{"show-header":!!t.showHead,data:t.paging?t.songs.slice(t.num-10,t.num):t.songs,"header-row-style":t.rowStyle,"row-class-name":t.rowClass,"cell-style":t.tableCellStyle,stripe:""}},[n("el-table-column",{staticStyle:{border:"none"},attrs:{width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-video-play",on:{click:function(n){return t.$bus.$emit("play",e.row,t.type)}}}),n("span",{staticClass:"inactive i-group"},["collections"==t.type?n("i",{staticClass:"el-icon-delete",attrs:{title:"delete"},on:{click:function(n){t.parentFunction&&t.parentFunction(e.row,e.$index)}}}):t._e(),n("i",{staticClass:"el-icon-plus",attrs:{title:"add to playlist"},on:{click:function(n){return t.$bus.$emit("add_to_playlist",e.row,t.type)}}}),n("i",{staticClass:"el-icon-folder-add",attrs:{title:"collect"},on:{click:function(n){return t.show_dialog(e.row)}}})])]}}],null,!1,4258965214)}),t._l(t.columns,(function(e,a){return n("el-table-column",{key:a,attrs:{label:e.label,width:e.width?e.width+"px":""},scopedSlots:t._u([{key:"default",fn:function(a){return[n("span",{class:{link:e.aformat},domProps:{innerHTML:t._s(e.aformat?t.linkFormat(e,a.row):t.evil(a.row,e.text))}})]}}],null,!0)})}))],2):t._e(),t.paging?n("div",{staticStyle:{"margin-top":"20px"}},["result"==!t.type?n("el-button",{attrs:{circle:"",icon:"el-icon-arrow-left"},on:{click:function(e){1==t.curPage?t.curPage:t.curPage--}}}):t._e(),t._l(t.page,(function(e,a){return n("span",{key:a,class:["pages",t.curPage==e?"selected":""],on:{click:function(n){t.curPage=e}}},[t._v(t._s(e))])})),"result"==!t.type?n("el-button",{attrs:{circle:"",icon:"el-icon-arrow-right"},on:{click:function(e){t.curPage==t.page?t.curPage:t.curPage++}}}):t._e()],2):t._e(),n("el-dialog",{attrs:{title:"收藏到歌单",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.$store.state.collections,(function(e,a){return n("el-radio",{key:a,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.collect}},[t._v("确 定")])],1)],1)],1)},X=[],G=n("7f96"),Q=G["a"],Y=(n("efdf"),Object(m["a"])(Q,J,X,!1,null,"a2e68680",null)),Z=Y.exports,tt={data:function(){return{collectionName:"",deleteId:void 0,columns:[{label:"name",text:"name"},{label:"artist",text:"artists[0].name",linkId:"artists[0].id",aformat:!0},{label:"album",text:"album.name",linkId:"album.id",aformat:!0}],dialogVisible:!1,dialogVisible2:!1}},components:{list:Z},beforeMount:function(){this.chooseCollection(0)},computed:Object(x["b"])({collections:function(t){return t.collections},curCollection:function(t){return t.curCollection}}),methods:{chooseCollection:function(t){this.$store.commit("setCurCollection",t),this.getSongsBycollection()},getSongsBycollection:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("http://127.0.0.1:3300/api/getSongsBycollection?id="+t.collections[t.curCollection].id);case 2:n=e.sent,200==n.status&&t.$store.commit("setSongs",{songs:n.data.map((function(t){return JSON.parse(t.data)})),index:t.curCollection});case 4:case"end":return e.stop()}}),e)})))()},deleteInList:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.$http.post("http://127.0.0.1:3300/api/deleteInList",{songId:t.id,id:n.collections[n.curCollection].id});case 2:a.sent,n.$store.commit("func",(function(t){t.collections[n.curCollection].songs.splice(e,1)}));case 4:case"end":return a.stop()}}),a)})))()},createCollection:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogVisible=!1,e.next=3,t.$http.post("http://127.0.0.1:3300/api/createCollection",{uid:t.$store.state.uid,collectionName:t.collectionName});case 3:n=e.sent,200==n.status&&t.$store.dispatch("getCollections");case 5:case"end":return e.stop()}}),e)})))()},deleteCollection:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogVisible2=!1,e.next=3,t.$http.post("http://127.0.0.1:3300/api/deleteCollection",{id:t.deleteId});case 3:n=e.sent,t.deleteId=void 0,n.status,t.$store.dispatch("getCollections");case 7:case"end":return e.stop()}}),e)})))()}},name:"collections"},et=tt,nt=(n("30b53"),Object(m["a"])(et,z,F,!1,null,"10509614",null)),at=nt.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"background-color":"white","min-height":"600px"}},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.setType},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[n("el-tab-pane",{attrs:{label:"单曲",name:"1"}},[n("list",{attrs:{type:"result",songs:t.songs,columns:t.columns}})],1),n("el-tab-pane",{attrs:{shadow:"never",label:"歌手",name:"100"}},[n("imgItem",{attrs:{items:t.artists,size:150,clickHandle:t.toArtist}})],1),n("el-tab-pane",{attrs:{label:"专辑",name:"10"}},[n("imgItem",{attrs:{items:t.albums,clickHandle:t.toAlbum}})],1)],1)],1)},st=[],it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},t._l(t.items,(function(e,a){return n("el-card",{key:e.id,class:[130==t.size?"card":"card2"],attrs:{shadow:"never","body-style":{padding:"0px"}},nativeOn:{click:function(n){return t.clickHandle(e.id)}}},[n("img",{staticClass:"albumImg",attrs:{src:e.picUrl+"?param="+t.imgSize,alt:e.name}}),n("span",{staticStyle:{"font-size":"12px"},on:{click:function(n){return t.show(e.id)}}},[t._v(t._s(t._f("ellipsis")(e.name,10)))])])})),1)},ot=[],lt=(n("a9e3"),{props:{items:Array,size:{type:Number,default:130},clickHandle:Function},mounted:function(){},methods:{show:function(t){console.log(t)}},computed:{imgSize:function(){return this.size+"y"+this.size}},name:"imgItem"}),ct=lt,ut=(n("c8b5"),Object(m["a"])(ct,it,ot,!1,null,"0c6a2ee5",null)),dt=ut.exports,pt={data:function(){return{songs:[],searchType:this.$route.params.type,name:"n1",artists:[],albums:[],columns:[{label:"name",text:"name"},{label:"artist",text:"name",array:"artists",isArray:!0,linkId:"id",aformat:!0},{label:"album",text:"album.name",linkId:"album.id",aformat:!0}]}},components:{list:Z,imgItem:dt},mounted:function(){this.sendXHR(this.$route.params)},watch:{$route:function(t,e){console.log(t.params)}},beforeRouteUpdate:function(t,e,n){return this.sendXHR(t.params),n()},methods:{toArtist:function(t){this.$router.push({name:"artist",params:{id:t}})},toAlbum:function(t){this.$router.push({name:"album",params:{id:t}})},sendXHR:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),a=t.keyword,r=t.type,n.next=4,e.$http.get("http://127.0.0.1:3000/search?keywords= "+a+"&limit=100&type="+r);case 4:s=n.sent,i=s.data.result,n.t0=e.searchType,n.next="1"===n.t0?9:"100"===n.t0?11:"10"===n.t0?13:15;break;case 9:return e.songs=i.songs,n.abrupt("break",15);case 11:return e.artists=i.artists,n.abrupt("break",15);case 13:return e.albums=i.albums,n.abrupt("break",15);case 15:if(200!=s.status){n.next=17;break}return n.abrupt("return",s.data.result);case 17:case"end":return n.stop()}}),n)})))()},setType:function(){this.$router.push({name:"search",params:Object(a["a"])({},this.$route.params,{type:this.searchType})})}},name:"search"},mt=pt,ft=(n("18ffe"),Object(m["a"])(mt,rt,st,!1,null,"03e577ec",null)),_t=ft.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.artist?n("div",{staticStyle:{padding:"30px","background-color":"white","border-left":"1px solid #d3d3d3","border-right":"1px solid #d3d3d3"}},[n("div",{staticClass:"name"},[n("h2",{staticClass:"cname"},[t._v(t._s(t.artist.name))]),n("h3",{staticClass:"alias"},[t._v(t._s(t.artist.alias[0]))])]),n("div",[t.artist?n("img",{staticStyle:{display:"block",width:"620px",height:"300px"},attrs:{src:t.artist.picUrl+"?param=620y300",width:""}}):t._e()]),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"热门作品"}},[n("list",{attrs:{songs:t.hotSongs,columns:t.columns,type:"artist"}})],1),n("el-tab-pane",{attrs:{label:"所有专辑"}},[n("imgItem",{attrs:{items:t.albums,clickHandle:t.$toAlbum}})],1),n("el-tab-pane",{attrs:{label:"艺人介绍"}},[n("h2",{staticClass:"brief"},[t._v(t._s(t.artist.name+"简介"))]),n("p",{staticClass:"article"},[t._v(" "+t._s(t.artist.briefDesc))])])],1)],1):t._e()},bt=[],gt={data:function(){return{hotSongs:[],albums:[],artist:void 0,columns:[{text:"name"},{text:"duration"}]}},components:{list:Z,imgItem:dt},mounted:function(){this.getArtist(this.$route.params),this.getAlbums(this.$route.params)},beforeRouteUpdate:function(t,e,n){return this.getArtist(t.params),n()},methods:{getArtist:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get("http://127.0.0.1:3000/artists?id="+t.id);case 2:a=n.sent,e.hotSongs=a.data.hotSongs.map((function(t){var n=t.ar,a=t.name,r=t.id,s=t.al,i=t.dt;return{name:a,id:r,artists:n,album:s,duration:e.format(i/1e3)}})),e.artist=a.data.artist,console.log(e.artist);case 6:case"end":return n.stop()}}),n)})))()},getAlbums:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get("http://127.0.0.1:3000/artist/album?id="+t.id);case 2:a=n.sent,e.albums=a.data.hotAlbums;case 4:case"end":return n.stop()}}),n)})))()},format:function(t){if(!t)return"0:00";var e=Math.floor(t%60);e=e<10?"0"+e:e;var n=Math.floor(t/60);return n=n<10?"0"+n:n,n+":"+e}},name:"Artist"},vt=gt,yt=(n("6b7a"),Object(m["a"])(vt,ht,bt,!1,null,"8791bd34",null)),wt=yt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{padding:"20px","background-color":"white"}},[t.album?n("div",{staticClass:"flex",staticStyle:{width:"100%","margin-bottom":"20px"}},[n("img",{staticStyle:{display:"inline-block"},attrs:{src:t.album.picUrl+"?param=180y180",alt:""}}),n("div",{staticClass:"text"},[n("h2",{staticClass:"cname"},[t._v(t._s(t.album.name))]),n("br"),n("h3",{staticClass:"alias",staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t.album.alias[0]))]),n("p",[t._v("歌手:"),n("span",{staticClass:"link",on:{click:function(e){return t.$router.push({name:"artist",params:{id:t.album.artist.id}})}}},[t._v(t._s(t.album.artist.name))])]),n("p",[t._v("发行时间:"+t._s(new Date(t.album.publishTime).format("yyyy-MM-dd")))]),n("p",[t._v("发行公司:"+t._s(t.album.company))]),n("div",[n("button",{staticClass:"button",on:{click:function(e){return t.$bus.$emit("playAlbum",t.songs)}}},[t._v("播放")])])])]):t._e(),n("list",{attrs:{songs:t.songs,columns:t.columns,showHead:!0,paging:!1}})],1)},kt=[],Ct={data:function(){return{album:void 0,songs:[],columns:[{text:"name",label:"歌名",width:500},{text:"name",label:"artist",array:"artists",isArray:!0,linkId:"id",aformat:!0},{text:"duration",label:"时长"}]}},components:{list:Z},methods:{getAlbum:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get("http://127.0.0.1:3000/album?id="+t.id);case 2:a=n.sent,e.album=a.data.album,e.songs=a.data.songs.map((function(t){var n=t.ar,a=t.name,r=t.id,s=t.dt,i=t.al;return{name:a,id:r,artists:n,album:i,duration:e.format(s/1e3)}}));case 5:case"end":return n.stop()}}),n)})))()},format:function(t){if(!t)return"0:00";var e=Math.floor(t%60);e=e<10?"0"+e:e;var n=Math.floor(t/60);return n=n<10?"0"+n:n,n+":"+e}},mounted:function(){this.getAlbum(this.$route.params)},name:"album"},Ot=Ct,It=(n("763a"),Object(m["a"])(Ot,xt,kt,!1,null,"3df377a0",null)),$t=It.exports;i["default"].use($["a"]);var Et=[{path:"/register",name:"register",component:M},{path:"/artist/id=:id",name:"artist",component:wt},{path:"/album/id=:id",name:"album",component:$t},{path:"/index",name:"index",component:U},{path:"/test",name:"test",component:H},{path:"/collections",name:"collections",component:at},{path:"/search/keyword=:keyword&type=:type",name:"search",component:_t}],St=new $["a"]({routes:Et});St.beforeEach((function(t,e,n){if("/message"!=t.path&&"/collections"!=t.path)return n();var a=St.app.$options.store.state.uid;return a?n():(alert("请登录"),St.push({name:"index"}))}));var Rt=St,jt=(n("b5c2"),n("450d"),n("20cf")),Pt=n.n(jt),Mt=(n("cb70"),n("b370")),At=n.n(Mt),Dt=(n("fe07"),n("6ac5")),Lt=n.n(Dt),Tt=(n("b5d8"),n("f494")),Vt=n.n(Tt),Ut=(n("b8e0"),n("a4c4")),Bt=n.n(Ut),Kt=(n("bdc7"),n("aa2f")),Wt=n.n(Kt),qt=(n("de31"),n("c69e")),Nt=n.n(qt),Ht=(n("a673"),n("7b31")),zt=n.n(Ht),Ft=(n("a769"),n("5cc3")),Jt=n.n(Ft),Xt=(n("adec"),n("3d2d")),Gt=n.n(Xt),Qt=(n("5466"),n("ecdf")),Yt=n.n(Qt),Zt=(n("075a"),n("72aa")),te=n.n(Zt),ee=(n("38a0"),n("ad41")),ne=n.n(ee),ae=(n("a7cc"),n("df33")),re=n.n(ae),se=(n("7a0f"),n("0f6c")),ie=n.n(se),oe=(n("f4f9"),n("c2cc")),le=n.n(oe),ce=(n("4ffc"),n("946e")),ue=n.n(ce),de=(n("826b"),n("c263")),pe=n.n(de),me=(n("10cb"),n("f3ad")),fe=n.n(me),_e=(n("eca7"),n("3787")),he=n.n(_e),be=(n("425f"),n("4105")),ge=n.n(be),ve=(n("4ca3"),n("443e")),ye=n.n(ve),we=(n("ce18"),n("f58e")),xe=n.n(we),ke=(n("8bd8"),n("4cb2")),Ce=n.n(ke),Oe=(n("4fdb"),n("b076")),Ie=n.n(Oe),$e=(n("960d"),n("defb")),Ee=n.n($e),Se=(n("bd49"),n("18ff")),Re=n.n(Se),je=(n("e612"),n("dd87")),Pe=n.n(je),Me=(n("1951"),n("eedf")),Ae=n.n(Me);n("f247");i["default"].use(Ae.a),i["default"].use(Pe.a),i["default"].use(Re.a),i["default"].use(Ee.a),i["default"].use(Ie.a),i["default"].use(Ce.a),i["default"].use(xe.a),i["default"].use(ye.a),i["default"].use(ge.a),i["default"].use(he.a),i["default"].use(fe.a),i["default"].use(pe.a),i["default"].use(ue.a),i["default"].use(le.a),i["default"].use(ie.a),i["default"].use(re.a),i["default"].use(ne.a),i["default"].use(te.a),i["default"].use(Yt.a),i["default"].use(Gt.a),i["default"].use(Jt.a),i["default"].use(zt.a),i["default"].use(Nt.a),i["default"].use(Wt.a),i["default"].use(Bt.a),i["default"].use(Vt.a),i["default"].use(Lt.a),i["default"].use(At.a),i["default"].use(Pt.a);var De=n("bc3a"),Le=n.n(De),Te=n("b828");Le.a.defaults.baseURL="http://127.0.0.1:3300/",Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},i["default"].config.productionTip=!1,i["default"].prototype.$http=Le.a,i["default"].prototype.$toAlbum=function(t){this.$router.push({name:"album",params:{id:t}})},i["default"].use(Te["a"]),i["default"].use(x["a"]),i["default"].prototype.mywindow=window,i["default"].filter("ellipsis",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return t?t.length>e?t.slice(0,e)+"...":t:""}));var Ve=new x["a"].Store({state:sessionStorage.getItem("state")?JSON.parse(sessionStorage.getItem("state")):{collections:[],uid:"",curCollection:"undefined"},mutations:{setUid:function(t,e){t.uid=e},setCurCollection:function(t,e){t.curCollection=e},setCollection:function(t,e){t.collections=e},setSongs:function(t,e){var n=e.songs,a=e.index;t.collections[a].songs=n},func:function(t,e){console.log(Object(s["a"])(e)),e(t)}},actions:{getCollections:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,r=t.state,""!=r.uid){e.next=4;break}return n("setCollection",[]),e.abrupt("return");case 4:return e.next=6,Le.a.get("http://127.0.0.1:3300/api/getCollections?uid="+r.uid);case 6:s=e.sent,200==s.status&&(i=s.data.map((function(t){return Object(a["a"])({},t,{songs:[]})})),n("setCollection",i));case 8:case"end":return e.stop()}}),e)})))()}},getters:{}});new i["default"]({router:Rt,render:function(t){return t(I)},store:Ve}).$mount("#app")},"65a4":function(t,e,n){},"66f2":function(t,e,n){},"6b7a":function(t,e,n){"use strict";var a=n("78ea"),r=n.n(a);r.a},"6ca7":function(t,e,n){},7357:function(t,e,n){},"763a":function(t,e,n){"use strict";var a=n("7e49"),r=n.n(a);r.a},"78ea":function(t,e,n){},"7e49":function(t,e,n){},"7f96":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_3__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_4__),D_newproject_demo_shop_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1da1");__webpack_exports__["a"]={data:function(){return{dialogVisible:!1,radio:"",curPage:1}},props:{type:{type:String},songs:{type:Array},parentFunction:{type:Function},columns:{type:Array},showHead:{type:Boolean,default:!1},paging:{type:Boolean,default:!0}},computed:{page:function(){return Math.ceil(this.songs.length/10)},num:function(){return 10*this.curPage}},methods:{test:function(t){"a"==t.target.nodeName.toLowerCase()&&(t.stopPropagation(),this.$router.push({name:t.target.dataset.name,params:JSON.parse(t.target.dataset.params)}))},evil:function evil(obj,prop){return eval("obj."+prop)},rowStyle:function(t){t.row;var e=t.rowIndex;return 0===e?"color:black;line-height:20px;":""},tableCellStyle:function(){return"border: none;"},rowClass:function(t){t.row,t.rowIndex;return"arow"},show_dialog:function(t){var e=this;this.dialogVisible=!0,this.collect=Object(D_newproject_demo_shop_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.post("http://127.0.0.1:3300/api/collect",{song:t,id:e.radio});case 2:a=n.sent,a.status,e.dialogVisible=!1;case 5:case"end":return n.stop()}}),n)})))},collect:function(){},linkFormat:function(t,e){var n=this;if(t.isArray){var a="",r=e[t.array].length;return e[t.array].forEach((function(e,s){a+="<a \n        data-name=".concat(t.label,'\n        data-params={"id":').concat(n.evil(e,t.linkId),"}\n         >\n      ").concat(n.evil(e,t.text),"\n      </a>"),s!=r-1&&(a+="/")})),a}return"<a \n        data-name=".concat(t.label,'\n        data-params={"id":').concat(this.evil(e,t.linkId),"}\n         >\n      ").concat(this.evil(e,t.text),"\n      </a>")}},name:"list"}},"85ec":function(t,e,n){},"8ba7":function(t,e,n){},9564:function(t,e,n){"use strict";var a=n("3889"),r=n.n(a);r.a},a647:function(t,e,n){},bf3e:function(t,e,n){"use strict";var a=n("6ca7"),r=n.n(a);r.a},c8b5:function(t,e,n){"use strict";var a=n("8ba7"),r=n.n(a);r.a},e289:function(t,e,n){"use strict";var a=n("66f2"),r=n.n(a);r.a},efdf:function(t,e,n){"use strict";var a=n("a647"),r=n.n(a);r.a},f247:function(t,e,n){}});
//# sourceMappingURL=app.dad78fb3.js.map